# Generated by osctld
# All changes will be lost

use_osctl () {
  echo "lxc-$1 is disabled on vpsAdmin OS. Use osctl instead." >&2
}

lxc_start () {
  echo "osctl will not be able to open tty0 of containers started using"
  echo "lxc-start, i.e. osctl console <ctid> will not work."
  echo -n "continue? [y/N]: "
  read cont

  if [ "$cont" == "y" ] ; then
    cmd=`which lxc-start`
    $cmd -P <%= ct.lxc_home %> -n <%= ct.id %> $@
  fi
}

alias lxc-start='lxc_start'

<% override.each do |cmd| -%>
alias lxc-<%= cmd%>='lxc-<%= cmd %> -P <%= ct.lxc_home %> -n <%= ct.id %>'
<% end -%>

<% disable.each do |cmd| -%>
alias lxc-<%= cmd%>='use_osctl <%= cmd %>'
<% end -%>

cd <%= ct.lxc_home %>
echo "Opened shell for:"
echo "  User:  <%= ct.user.name %>"
echo "  Group: <%= ct.group.name %>"
echo "  CT:    <%= ct.id %>"
echo
echo "Available LXC utilities:"
<% override.each do |cmd| -%>
echo "  lxc-<%= cmd %>"
<% end -%>
echo
echo "Implicit arguments: -P <%= ct.lxc_home %> -n <%= ct.id %>"
echo "Do not use this shell to manipulate any other container than <%= ct.id %>."
