# Generated by osctld
<% OsCtld::Lxc::dist_lxc_configs(distribution, version).each do |cfg| -%>
lxc.include = <%= cfg %>
<% end -%>
lxc.include = /etc/lxc/common.conf.d/00-lxcfs.conf
<% if ct.nesting -%>
lxc.include = /etc/lxc/config/nesting.conf
<% end -%>

lxc.rootfs.path = <%= ct.rootfs %>
lxc.arch = <%= ct.arch %>
lxc.uts.name = <%= ct.hostname || ct.id %>
lxc.idmap = u 0 <%= ct.uid_offset %> <%= ct.uid_size %>
lxc.idmap = g 0 <%= ct.gid_offset %> <%= ct.gid_size %>

lxc.autodev = 1

lxc.hook.version = 1
lxc.hook.pre-start = <%= OsCtld::hook_run('ct-pre-start', ct.pool) %>
lxc.hook.pre-mount = <%= OsCtld::hook_run('ct-pre-mount', ct.pool) %>
lxc.hook.mount = <%= OsCtld::hook_run('ct-post-mount', ct.pool) %>
lxc.hook.autodev = <%= OsCtld::hook_run('ct-autodev', ct.pool) %>
lxc.hook.start-host = <%= OsCtld::hook_run('ct-on-start', ct.pool) %>

lxc.include = <%= ct.lxc_config_path('network') %>
lxc.include = <%= ct.lxc_config_path('prlimits') %>
lxc.include = <%= ct.lxc_config_path('mounts') %>
