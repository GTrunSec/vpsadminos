# This file is generated by osctl from vpsAdmin.
#
# WARNING: Do not edit this file, your changes will be lost.
# Please create/edit /etc/network/interfaces.head and
# /etc/network/interfaces.tail instead, their contents will be
# inserted at the beginning and at the end of this file, respectively.

auto lo
iface lo inet loopback

auto eth0

<% networks.each do |v, ip| -%>
<% next unless ip.enabled? -%>
iface eth0 <%= v == 4 ? 'inet' : 'inet6' %> static
  address <%= ip.via.ct_ip.to_s %>
  netmask <%= ip.via.ct_ip.netmask %>
<% ip.addrs.each do |addr| -%>
  up ip -<%= v %> addr add <%= addr.to_string %> dev eth0
  down ip -<%= v %> addr del <%= addr.to_string %> dev eth0
<% end -%>
<% if ip.addrs.any? -%>
  up ip -<%= v %> route add default via <%= ip.via.host_ip.to_s %> src <%= ip.addrs.first.to_s %>
<% end -%>
<% end %>
